---
title: Code Coverage
permalink: /features/coverage
description: Learn about the code coverage analysis the Creek aggregate template sets up. This includes coverage from unit test and your service code running in Docker containers
layout: single
---

Code coverage analysis is handled by [Jacoco][jacoco] and, optionally, coverage reports can be published to [Coveralls.io][coveralls].

## Code coverage analysis

The repository is configured to report code coverage using [Jacoco][jacoco]. 
A test coverage report can be generated by running the `coverage` Gradle task:

```
./gradlew coverage
```

Combined coverage reports for all modules in the repository will be created, 
capturing coverage data from both [unit][unitTest] and [system tests][systemTest].
Two styles of reports are generated by default:
* A machine friendly XML report is created at `build/reports/jacoco/coverage/coverage.xml`.
* A human friendly HTML report is created at `build/reports/jacoco/coverage/html/index.html`.

Settings for code coverage are configured in the [Creek coverage build convention][coverageConvention],
which can be customised as needed.

## Code coverage publishing

The repository is configured to publish code coverage of tests to [Coveralls.io][coveralls] when the `coveralls`
Gradle task is executed.  

```
./gradlew coveralls
```

This task is executed as part of the default [CI GitHub workflow][buildYml].

If you wish to make use of Coveralls.io for your code coverage needs then you will need to:

1. Create a [Coveralls.io][coveralls] account.
2. Import your new repository into Coveralls, noting the `REPO TOKEN`.
3. Store the Coveralls `REPO TOKEN` in a [repository secret][ghSecret] in GitHub named `COVERALLS_REPO_TOKEN`. 

[jacoco]: https://www.jacoco.org/jacoco/trunk/doc/
[coveralls]: https://coveralls.io/
[buildYml]: https://github.com/creek-service/aggregate-template/blob/main/.github/workflows/build.yml
[coverageConvention]: https://github.com/creek-service/aggregate-template/blob/main/buildSrc/src/main/kotlin/creek-coverage-convention.gradle.kts
[ghSecret]: https://docs.github.com/en/codespaces/managing-codespaces-for-your-organization/managing-encrypted-secrets-for-your-repository-and-organization-for-github-codespaces
[systemTest]: {{ "/features/system-testing" | relative_url }}
[unitTest]: {{ "/features/unit-testing" | relative_url }}